# üß™ Backtest System Documentation

‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡∏£‡∏î‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á (Backtesting System)

## üìã ‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç

1. [‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°](#‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°)
2. [‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå](#‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå)
3. [‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á](#‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á)
4. [‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô](#‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)
5. [‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å](#‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å)
6. [‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå](#‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå)
7. [‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á](#‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á)

---

## üéØ ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°

Backtest System ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡∏£‡∏î‡∏Ç‡∏≠‡∏á‡∏ö‡∏≠‡∏ó‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì:

- ‚úÖ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏£‡∏¥‡∏á
- ‚úÖ ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ú‡∏•‡∏Å‡∏≥‡πÑ‡∏£/‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô
- ‚úÖ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì metrics ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (Win Rate, Sharpe Ratio, Max Drawdown, etc.)
- ‚úÖ ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏´‡∏•‡∏≤‡∏¢‡πÜ ‡πÅ‡∏ö‡∏ö
- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

---

## üìÅ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå

```
backtest/
‚îÇ
‚îú‚îÄ‚îÄ __init__.py                  # Module initialization
‚îú‚îÄ‚îÄ data_loader.py               # ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏≤‡∏Å Binance ‡∏´‡∏£‡∏∑‡∏≠ CSV
‚îú‚îÄ‚îÄ backtest_engine.py           # Engine ‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡∏£‡∏î
‚îú‚îÄ‚îÄ performance_metrics.py       # ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå metrics
‚îú‚îÄ‚îÄ visualizer.py               # ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏•‡∏∞ charts
‚îú‚îÄ‚îÄ comparator.py               # ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ú‡∏• backtests ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≠‡∏ö
‚îú‚îÄ‚îÄ requirements.txt            # Dependencies ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö backtest
‚îÇ
‚îú‚îÄ‚îÄ data/                       # Cache ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î
‚îú‚îÄ‚îÄ results/                    # ‡∏ú‡∏•‡∏Å‡∏≤‡∏£ backtest (JSON)
‚îî‚îÄ‚îÄ reports/                    # ‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (PNG)

run_backtest.py                 # Script ‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏±‡∏ô backtest
```

---

## üîß ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

### 1. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Dependencies

```powershell
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á packages ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ)
pip install pandas numpy

# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á packages ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö visualization (optional)
pip install matplotlib seaborn
```

‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏à‡∏≤‡∏Å requirements ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå backtest:

```powershell
pip install -r backtest/requirements.txt
```

### 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API Keys

‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏ü‡∏•‡πå `config/config.py` ‡∏°‡∏µ API keys ‡∏Ç‡∏≠‡∏á Binance:

```python
API_KEY = "your_api_key"
API_SECRET = "your_api_secret"
```

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** Backtest ‡∏à‡∏∞‡πÉ‡∏ä‡πâ API ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡∏£‡∏î‡∏à‡∏£‡∏¥‡∏á

---

## üöÄ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### üîπ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏£‡∏±‡∏ô Backtest ‡πÅ‡∏ö‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô

```powershell
python run_backtest.py
```

Script ‡∏à‡∏∞‡∏£‡∏±‡∏ô backtest ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô:
- ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤: 7 ‡∏ß‡∏±‡∏ô‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á
- Symbols: BTC, ETH, BNB, SOL, ADA
- ‡∏ó‡∏∏‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: $100
- Timeframe: 1 ‡∏ô‡∏≤‡∏ó‡∏µ

### üîπ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `run_backtest.py`:

```python
# ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤
START_DATE = datetime(2025, 1, 1, tzinfo=UTC)
END_DATE = datetime(2025, 1, 31, tzinfo=UTC)

# ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Symbols
SYMBOLS = [
    'BTCUSDT',
    'ETHUSDT',
    'BNBUSDT',
    # ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
]

# ‡∏ó‡∏∏‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
INITIAL_BALANCE = 100.0

# Timeframe
TIMEFRAME = '1m'  # 1m, 5m, 15m, 1h, etc.
```

### üîπ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 3: ‡∏£‡∏±‡∏ô Backtest ‡πÅ‡∏ö‡∏ö Custom

‡∏™‡∏£‡πâ‡∏≤‡∏á script ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏≠‡∏á:

```python
from datetime import datetime, timedelta, UTC
from run_backtest import run_backtest

# ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå
symbols = ['BTCUSDT', 'ETHUSDT']
start = datetime.now(UTC) - timedelta(days=30)
end = datetime.now(UTC)

# ‡∏£‡∏±‡∏ô backtest
results = run_backtest(
    symbols=symbols,
    start_date=start,
    end_date=end,
    initial_balance=500.0,  # $500
    timeframe='5m',         # 5-minute candles
    use_cache=True
)
```

---

## üé® ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å

### 1Ô∏è‚É£ **Historical Data Loader**

‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤:

```python
from backtest.data_loader import HistoricalDataLoader
from binance.spot import Spot

client = Spot(api_key="...", api_secret="...")
loader = HistoricalDataLoader(client=client)

# ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
data = loader.download_historical_data(
    symbol='BTCUSDT',
    interval='1m',
    start_date=start_date,
    end_date=end_date,
    use_cache=True  # ‡πÉ‡∏ä‡πâ cache ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
)
```

**Features:**
- ‚úÖ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å Binance ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‚úÖ Cache ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤
- ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢ symbols
- ‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å CSV ‡πÑ‡∏î‡πâ

### 2Ô∏è‚É£ **Backtest Engine**

‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡∏£‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏à‡∏£‡∏¥‡∏á:

```python
from backtest.backtest_engine import BacktestEngine

engine = BacktestEngine(
    initial_balance=100.0,
    commission_rate=0.001,    # 0.1% fee
    slippage_pct=0.0005,      # 0.05% slippage
    max_positions=3,          # Max 3 trades ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
    position_size_pct=0.33    # 33% per trade
)

results = engine.run_backtest(data=historical_data)
```

**Features:**
- ‚úÖ ‡∏à‡∏≥‡∏•‡∏≠‡∏á slippage ‡πÅ‡∏•‡∏∞ commission
- ‚úÖ Position management
- ‚úÖ Stop Loss / Take Profit
- ‚úÖ Time-based exits
- ‚úÖ ‡πÉ‡∏ä‡πâ indicators ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ö‡∏≠‡∏ó‡∏à‡∏£‡∏¥‡∏á

### 3Ô∏è‚É£ **Performance Metrics**

‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì metrics ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 20 ‡∏ï‡∏±‡∏ß:

```python
from backtest.performance_metrics import PerformanceMetrics

metrics = PerformanceMetrics.calculate_metrics(
    trades=results['trades'],
    initial_balance=100.0
)

# ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
PerformanceMetrics.print_summary(metrics)
```

**Metrics ‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì:**

| Category | Metrics |
|----------|---------|
| **Basic** | Total Trades, Win Rate, P&L |
| **Risk** | Max Drawdown, Sharpe Ratio, Risk/Reward |
| **Trade** | Avg Win, Avg Loss, Best/Worst Trade |
| **Advanced** | Profit Factor, Expectancy, Symbol Stats |

### 4Ô∏è‚É£ **Visualizer**

‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏•‡∏∞ charts:

```python
from backtest.visualizer import BacktestVisualizer

viz = BacktestVisualizer(results_file="backtest/results/backtest_xxx.json")

# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏≠‡∏±‡∏ô
viz.plot_equity_curve()
viz.plot_drawdown()
viz.plot_trade_distribution()
viz.plot_symbol_performance()

# ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
viz.create_full_report(output_dir="backtest/reports")
```

**Charts ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á:**
- üìà Equity Curve
- üìâ Drawdown Chart
- üìä Trade Distribution (Histogram)
- üéØ Symbol Performance

### 5Ô∏è‚É£ **Comparator**

‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ú‡∏• backtests ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≠‡∏ö:

```python
from backtest.comparator import BacktestComparator
import glob

# ‡πÇ‡∏´‡∏•‡∏î‡∏ú‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
files = glob.glob("backtest/results/*.json")
comp = BacktestComparator(files)

# ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö
comp.print_comparison()

# ‡∏´‡∏≤ backtest ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
best = comp.find_best_result('sharpe_ratio')

# Export ‡πÄ‡∏õ‡πá‡∏ô CSV
comp.export_comparison_csv()
```

---

## üìä ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå

### Console Output

```
================================================================================
                            üìä BACKTEST RESULTS                                
================================================================================
üí∞ Initial Balance: $100.00
üí∞ Final Balance:   $105.50
üìà Total P&L:       $5.50 (+5.50%)
--------------------------------------------------------------------------------
üìä Total Trades:    45
‚úÖ Winning Trades:  28 (62.22%)
‚ùå Losing Trades:   17
üéØ Profit Factor:   1.85
üí° Expectancy:      $0.12
--------------------------------------------------------------------------------
üìä Avg Trade:       $0.12
‚úÖ Avg Win:         $0.35
‚ùå Avg Loss:        -$0.18
‚öñÔ∏è  Risk/Reward:     1.94
--------------------------------------------------------------------------------
üéâ Best Trade:      $1.25 (+2.50%)
üò¢ Worst Trade:     -$0.75 (-1.50%)
--------------------------------------------------------------------------------
üìâ Max Drawdown:    -$2.30 (-2.30%)
üìä Sharpe Ratio:    1.45
‚è±Ô∏è  Avg Duration:    12.5 minutes
================================================================================
```

### JSON Output

‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô `backtest/results/backtest_YYYYMMDD_HHMMSS.json`:

```json
{
  "config": {
    "symbols": ["BTCUSDT", "ETHUSDT"],
    "start_date": "2025-01-01T00:00:00+00:00",
    "end_date": "2025-01-31T23:59:59+00:00",
    "initial_balance": 100.0,
    "timeframe": "1m"
  },
  "metrics": {
    "total_trades": 45,
    "win_rate": 62.22,
    "total_return_pct": 5.50,
    "sharpe_ratio": 1.45,
    ...
  },
  "trades": [...]
}
```

---

## ‚öôÔ∏è ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á

### üîß ‡∏õ‡∏£‡∏±‡∏ö‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå Engine

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ô `run_backtest.py` ‡∏´‡∏£‡∏∑‡∏≠ script ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:

```python
engine = BacktestEngine(
    initial_balance=500.0,        # ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏∏‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
    commission_rate=0.0005,       # ‡∏•‡∏î fee (VIP level)
    slippage_pct=0.001,           # ‡πÄ‡∏û‡∏¥‡πà‡∏° slippage (realistic)
    max_positions=5,              # ‡πÄ‡∏ó‡∏£‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ 5 ‡∏Ñ‡∏π‡πà
    position_size_pct=0.2         # ‡πÉ‡∏ä‡πâ 20% per trade
)
```

### üéØ ‡∏õ‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `backtest_engine.py` ‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô signal generation:

```python
def _should_enter_long(self, signals: Dict) -> bool:
    """‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÄ‡∏Ç‡πâ‡∏≤ LONG"""
    confluence = 0
    
    # ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏î/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç
    if signals['rsi'] < 30:  # ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å 30 ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏≠‡∏∑‡πà‡∏ô
        confluence += 1
    
    # ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÉ‡∏´‡∏°‡πà
    if signals['volume_ratio'] > 2.0:
        confluence += 2  # ‡πÉ‡∏´‡πâ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô
    
    return confluence >= 3  # ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡∏µ‡∏î‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô
```

### üìà ‡πÄ‡∏û‡∏¥‡πà‡∏° Indicators ‡πÉ‡∏´‡∏°‡πà

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `_calculate_signals()` ‡πÉ‡∏ô `backtest_engine.py`:

```python
def _calculate_signals(self, df: pd.DataFrame) -> Dict:
    # ... existing code ...
    
    # ‡πÄ‡∏û‡∏¥‡πà‡∏° indicator ‡πÉ‡∏´‡∏°‡πà
    sma_20 = np.mean(close[-20:])
    sma_50 = np.mean(close[-50:])
    
    return {
        # ... existing signals ...
        'sma_20': sma_20,
        'sma_50': sma_50,
        'sma_cross': 'golden' if sma_20 > sma_50 else 'death'
    }
```

---

## üéì Best Practices

### 1. **‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠**
- ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 1m timeframe
- ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3-6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 5m-15m

### 2. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤**
```python
# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡πà‡∏ß‡∏á
periods = [
    (datetime(2025, 1, 1), datetime(2025, 1, 31)),
    (datetime(2025, 2, 1), datetime(2025, 2, 28)),
    (datetime(2025, 3, 1), datetime(2025, 3, 31)),
]

for start, end in periods:
    run_backtest(symbols, start, end, ...)
```

### 3. **‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ú‡∏•**
```python
# ‡πÉ‡∏ä‡πâ Comparator ‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢
comparator = BacktestComparator(all_result_files)
summary = comparator.get_summary_statistics()
```

### 4. **‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤ Market Conditions**
- Bull market vs Bear market
- High volatility vs Low volatility
- ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡∏ï‡∏•‡∏≤‡∏î

### 5. **‡∏£‡∏∞‡∏ß‡∏±‡∏á Overfitting**
- ‡∏≠‡∏¢‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
- ‡∏ó‡∏î‡∏™‡∏≠‡∏ö out-of-sample data
- ‡πÉ‡∏ä‡πâ walk-forward analysis

---

## üêõ Troubleshooting

### ‚ùå API Error
```
Error: 429 Too Many Requests
```
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà

### ‚ùå No Data
```
Error: No data downloaded for XXXUSDT
```
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** 
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡∏∑‡πà‡∏≠ symbol ‡∏ß‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ (‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î)

### ‚ùå Visualization Error
```
Error: matplotlib not available
```
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
```powershell
pip install matplotlib seaborn
```

### ‚ùå Memory Error
```
MemoryError: Unable to allocate array
```
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
- ‡∏•‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô symbols
- ‡∏•‡∏î‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤
- ‡πÉ‡∏ä‡πâ timeframe ‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô (5m ‡πÅ‡∏ó‡∏ô 1m)

---

## üìö ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

- [Binance API Documentation](https://binance-docs.github.io/apidocs/spot/en/)
- [Pandas Documentation](https://pandas.pydata.org/docs/)
- [Matplotlib Gallery](https://matplotlib.org/stable/gallery/index.html)

---

## ü§ù ‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô

‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠:

1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö logs ‡πÉ‡∏ô console
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÉ‡∏ô `backtest/results/`
3. ‡πÄ‡∏õ‡∏¥‡∏î issue ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤

---

## üìù License

‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ license ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö main bot

---

**Happy Backtesting! üöÄüìà**
